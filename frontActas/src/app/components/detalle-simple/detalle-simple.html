<mat-card class="boleta-window">
  <!-- Encabezado moderno -->
  <div class="boleta-header">
    <div class="title-wrap">
      <mat-icon>receipt_long</mat-icon>
      <h2>Detalle de la Boleta</h2>
    </div>
    <button mat-icon-button mat-dialog-close class="close-btn" aria-label="Cerrar">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <!-- Zona scrollable principal (ocupa todo el alto disponible) -->
  <div class="boleta-scroll">
    <div class="boleta-grid">
      <!-- Datos a la izquierda -->
      <mat-card class="boleta-user-card">
        <mat-card-title>Datos del Usuario</mat-card-title>
        <mat-card-content>
          <div class="user-row"><strong>Periodo:</strong> <span>{{data?.periodoPago}}</span></div>
          <div class="user-row"><strong>Cargo:</strong> <span>{{data?.cargoOrig}}</span></div>
          <div class="user-row"><strong>Nombre:</strong> <span>{{data?.nombres}} {{data?.apePaterno}} {{data?.apeMaterno}}</span></div>
          <div class="user-row"><strong>DNI:</strong> <span>{{data?.nroDocumento}}</span></div>
          <div class="user-row"><strong>Código Modular:</strong> <span>{{data?.codigoModular}}</span></div>
          <div class="user-row"><strong>Proceso:</strong> <span>{{data?.tipoServidor}}</span></div>
          <div class="user-row"><strong>Días trabajados:</strong> <span>{{data?.diasTrabajados}}</span></div>
          <div class="user-row"><strong>Total Remuneración:</strong> <span>{{data?.totalRemuneracion | currency:'PEN'}}</span></div>
          <div class="user-row"><strong>Total Tributable:</strong> <span>{{data?.tributable | currency:'PEN'}}</span></div>
          <div class="user-row"><strong>Total Líquido:</strong> <span>{{data?.totalLiquido | currency:'PEN'}}</span></div>
        </mat-card-content>
      </mat-card>

      <!-- Ingresos y Egresos a la derecha -->
      <div class="boleta-tables">
        <mat-card class="boleta-ing-card">
          <mat-card-title>Ingresos</mat-card-title>
          <mat-card-content>
            <table mat-table [dataSource]="ingresos" class="mat-elevation-z1">
              <ng-container matColumnDef="concepto">
                <th mat-header-cell *matHeaderCellDef> Concepto </th>
                <td mat-cell *matCellDef="let i"> {{i.concepto}} </td>
              </ng-container>
              <ng-container matColumnDef="monto">
                <th mat-header-cell *matHeaderCellDef> Monto </th>
                <td mat-cell *matCellDef="let i"> {{i.monto | currency:'PEN'}} </td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="ingresosDisplayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: ingresosDisplayedColumns;"></tr>
              <tr class="empty-row" *ngIf="ingresos.length === 0">
                <td colspan="2">Sin ingresos</td>
              </tr>
            </table>
            <div class="boleta-totales">
              <strong>Total Ingresos:</strong> {{totalIngresos | currency:'PEN'}}
            </div>
          </mat-card-content>
        </mat-card>

        <mat-card class="boleta-egre-card">
          <mat-card-title>Egresos</mat-card-title>
          <mat-card-content>
            <table mat-table [dataSource]="egresos" class="mat-elevation-z1">
              <ng-container matColumnDef="concepto">
                <th mat-header-cell *matHeaderCellDef> Concepto </th>
                <td mat-cell *matCellDef="let e"> {{e.concepto}} </td>
              </ng-container>
              <ng-container matColumnDef="monto">
                <th mat-header-cell *matHeaderCellDef> Monto </th>
                <td mat-cell *matCellDef="let e"> {{e.monto | currency:'PEN'}} </td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="egresosDisplayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: egresosDisplayedColumns;"></tr>
              <tr class="empty-row" *ngIf="egresos.length === 0">
                <td colspan="2">Sin egresos</td>
              </tr>
            </table>
            <div class="boleta-totales"><strong>Total Egresos:</strong> {{totalEgresos | currency:'PEN'}}</div>
            <div class="boleta-totales saldo-neto"><strong>Saldo Neto:</strong> {{(totalIngresos - totalEgresos) | currency:'PEN'}}</div>
          </mat-card-content>
        </mat-card>
      </div>
    </div>
  </div>

  <!-- Acciones fijas al fondo -->
  <div class="boleta-actions">
    <button mat-raised-button color="primary" mat-dialog-close>
      <mat-icon>close</mat-icon>
      Cerrar
    </button>
    <button mat-raised-button color="accent" (click)="agregarADetalles()">
      <mat-icon>playlist_add</mat-icon>
      Agregar a detalles
    </button>
    <button mat-button color="primary" [routerLink]="['/detalles-completos', dialogData.id]">
      <mat-icon>open_in_new</mat-icon>
      Ver Detalle Completo
    </button>
  </div>
</mat-card>