/* Hoja de estilos CSS - Pestaña de detalles y estilos para impresion */
/* Paleta sobria (coincide con dashboard) */

:host {
  --ink: #222;
  --muted: #536071;
  --line: #9aa3b2;
  --paper: #ffffff;
  --bg: #f5f6fa;
  --accent: #1976d2;
  --success: #057e3a;
}

/* Botonera superior (solo pantalla) */
.print-toolbar {
  display: flex;
  justify-content: flex-end;
  margin: 8px 0 8px;
}
.no-print { display: block; }

/* Hoja A4 (preview en pantalla) */
.print-sheet.a4 {
  width: 210mm;
  min-height: 297mm;
  margin: 12px auto;
  background: var(--paper);
  color: var(--ink);
  box-shadow: 0 8px 28px rgba(17,25,40,0.15);
  border: 1px solid #e5e7eb;
  border-radius: 4px;
  display: grid;
  grid-template-rows: auto 1fr auto;
  padding: 14mm 14mm 12mm 14mm;
  overflow: visible;
  box-sizing: border-box;
}

/* Wrapper interno para impresión escalada */
.print-inner { /* en pantalla no hace nada especial */
}

/* Encabezado */
.doc-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 12px;
  margin-bottom: 8mm;
  border-bottom: 1px solid #e5e7eb;
  padding-bottom: 6mm;
}
.doc-brand h1 {
  margin: 0;
  font-size: 18pt;
  font-weight: 800;
  color: #263043;
  letter-spacing: 0.2px;
}
.doc-meta { text-align: right; font-size: 10pt; color: var(--muted); }
.doc-meta strong { color: var(--ink); }

/* Grid del cuerpo */
.sheet-grid {
  display: grid;
  grid-template-columns: minmax(0, 62%) minmax(0, 1fr);
  gap: 10mm;
  align-items: start;
}

/* Títulos */
.section-title {
  font-size: 12pt;
  font-weight: 700;
  color: #263043;
  margin: 0 0 6px 0;
}

/* Cards */
.doc-card {
  background: var(--paper);
  border: 1px solid #cfd6e0;
  border-radius: 3px;
  box-shadow: none;
  margin: 0;
}
.small-card { padding: 0; }

/* Tabla izquierda */
.doc-table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;
  font-size: 10pt;
}
.doc-table td, .doc-table th {
  border: 0.6px solid #7e8794;
  padding: 6px 8px;
  vertical-align: top;
  color: var(--ink);
  line-height: 1.25;
  word-break: break-word;
  overflow-wrap: anywhere;
}
.doc-table th { background: #eef2f7; font-weight: 700; }

/* Tablas de la derecha (mat-table) */
.doc-mat-table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;
  font-size: 10pt;
}
.doc-mat-table th.mat-header-cell {
  background: #eef2f7 !important;
  color: var(--ink) !important;
  border: 0.6px solid #7e8794;
  padding: 6px 8px;
  font-weight: 700;
  word-break: break-word;
}
.doc-mat-table td.mat-cell {
  background: #fff !important;
  color: var(--ink) !important;
  border: 0.6px solid #7e8794;
  padding: 6px 8px;
  word-break: break-word;
}

/* Totales */
.doc-total { margin-top: 8px; font-weight: 700; color: var(--ink); font-size: 10pt; }
.doc-total.neto { color: var(--success); }

/* Pie */
.doc-footer {
  margin-top: 10mm;
  display: flex;
  justify-content: space-between;
  align-items: center;
  color: var(--muted);
  font-size: 9pt;
  border-top: 1px solid #e5e7eb;
  padding-top: 4mm;
}

/* Estados */
.doc-loading, .doc-empty { text-align: center; margin: 2rem; color: var(--muted); }

/* Pantalla móvil */
@media (max-width: 980px) {
  .print-sheet.a4 { width: 100%; min-height: auto; padding: 16px; }
  .sheet-grid { grid-template-columns: 1fr; gap: 14px; }
}

/* Impresión: hoja fija + inner escalado ABSOLUTO (una sola página) */
@page { size: A4 portrait; margin: 0; }

@media print {
  .no-print { display: none !important; }

  html, body { background: #fff !important; height: auto !important; overflow: visible !important; }

  .print-sheet.a4 {
    width: 210mm !important;
    height: 297mm !important;
    position: relative !important;
    margin: 0 !important;
    border: 0 !important;
    box-shadow: none !important;
    padding: 0 !important;
    overflow: hidden !important;
    page-break-after: auto !important; /* no hoja extra */
    box-sizing: border-box !important;
  }

  /* Aquí ocurre la magia: el contenido se posiciona absoluto y se escala */
  .print-inner {
    position: absolute !important;
    top: 0; left: 0;
    transform-origin: top left !important;
    transform: scale(var(--print-scale, 1)) !important;
    /* El ancho/alto "sin escala" para que tras el scale encaje en 210x297 con padding */
    width: calc(210mm / var(--print-scale, 1)) !important;
    /* La altura puede ser mayor, pero al estar absolute no empuja páginas; overflow lo corta */
    height: auto !important;
    padding: 10mm !important;       /* margen interno visible en la hoja */
    box-sizing: border-box !important;
  }

  /* Mantén dos columnas y reduce gap por seguridad */
  .sheet-grid { grid-template-columns: 62% 38% !important; gap: 8mm !important; }

  /* Material table como tabla real */
  .doc-mat-table { display: table !important; width: 100% !important; }
  .doc-mat-table .mat-mdc-header-row,
  .doc-mat-table .mat-header-row { display: table-row !important; }
  .doc-mat-table .mat-mdc-row,
  .doc-mat-table .mat-row { display: table-row !important; }
  .doc-mat-table .mat-mdc-header-cell,
  .doc-mat-table .mat-header-cell,
  .doc-mat-table .mat-mdc-cell,
  .doc-mat-table .mat-cell { display: table-cell !important; }

  table, tr, td, th { page-break-inside: avoid !important; }

  * { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
}